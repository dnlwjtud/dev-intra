{% extends "/layouts/layout.html" %}
{% block page_title %} Container list {% endblock %}
{% block header %}
  {{ super() }}
{% endblock %}
{% block contents %}
  <div class="header_con mt-3">
    <h2>
      {{ container.container_name[1:] }} [{{ container.container_id[:11] }}]
    </h2>
  </div>

  <hr />

  <div class="body_con mt-3">

    <div id="container-state" class="mt-2">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Status</th>
            <th scope="col">Running</th>
            <th scope="col">Restarting</th>
            <th scope="col">Dead</th>
            <th scope="col">ExitCode</th>
            <th scope="col">Created_at</th>
            <th scope="col">StartedAt</th>
            <th scope="col">FinishedAt</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              {% if container.state['Status'] == 'running' %}
                <span class="badge text-bg-success">{{container.state['Status']}}</span>
              {% elif container.state['Status'] == 'exited' %}
                <span class="badge text-bg-danger">{{container.state['Status']}}</span>
              {% else %}
                <span class="badge text-bg-warning">{{container.state['Status']}}</span>
              {% endif %}
            </td>
            <td>{{container.state['Running']}}</td>
            <td>{{container.state['Restarting']}}</td>
            <td>{{container.state['Dead']}}</td>
            <td>{{container.state['ExitCode']}}</td>
            <td>{{ container.created_at[:10] }}</td>
            {% set cnt_started_at = container.state['StartedAt'].split('T') %}
            <td>{{ cnt_started_at[0]}}  {{cnt_started_at[1].split('.')[0]}}</td>
            {% set cnt_finished_at = container.state['FinishedAt'].split('T') %}
            <td>{{ cnt_finished_at[0]}}  {{cnt_finished_at[1].split('.')[0]}}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div id="container-details" class="mt-2">

      <table class="table">
        <thead>
          <tr>
            <th scope="col">
              Image Id
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              {{ container.image_id }}
            </td>
          </tr>
        </tbody>
      </table>

      <table class="table">
        <thead>
          <tr>
            <th scope="col">
              arguments
            </th>
          </tr>
        </thead>
        <tbody>
          {% if container.args|length > 0 %}
            {% for arg in container.args %}
              <tr>
                <td>
                  {{ arg }}
                </td>
              </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td>
                None
              </td>
            </tr>
          {% endif %}
        </tbody>
      </table>

      <h6 class="mb-2 mt-4 fw-bold mx-1">
        Binds Information
      </h6>

      <table class="table">
        <thead>
          <tr>
            <th scope="col">
              Host
            </th>
            <th scope="col">
              Container
            </th>
          </tr>
        </thead>
        <tbody>
          {% if container.binds %}
            {% for dir in container.binds %}
            <tr>
              <td>
                {{dir.split(":")[0]}}
              </td>
              <td>
                {{dir.split(":")[1]}}
              </td>
            </tr>
            {% endfor %}
          </tr>
          {% else %}
          <tr>
            <td>
              None
            </td>
            <td></td>
          </tr>
          {% endif %}
        </tbody>
      </table>

    </div>

    {{ container.mounts }}

  </div>


{% endblock %}